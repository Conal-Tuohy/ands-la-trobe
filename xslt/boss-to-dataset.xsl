<?xml version="1.0"?>
<xsl:stylesheet version="1.0" 
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>
<!--
<values>
	<Other>
		<ExtractionDate>2011-08-22T14:31:46+10:00</ExtractionDate>
		<RequestFrom>131.172.245.199</RequestFrom>
		<EPN>XPS-Ultra-10005</EPN>
	</Other>
	<logSheet>
		<Instrument>XPS-Ultra</Instrument>

		<JobNumber>XPS-Ultra-10005</JobNumber>
		<ProposalNumber>2011-04-11_10:54:40-XPS-md</ProposalNumber>
		<Clips></Clips>
		<Composition></Composition>
		<CompositionKV></CompositionKV>
		<ConstantHeightBar></ConstantHeightBar>
		<DepthProfiles></DepthProfiles>
		<EBeamHeater></EBeamHeater>

		<EBeamHeaterNumber></EBeamHeaterNumber>
		<fDay>20</fDay>
		<FlatBar></FlatBar>
		<FlatStub></FlatStub>
		<fMonth>5</fMonth>
		<fPressureY></fPressureY>
		<fPressureYY></fPressureYY>
		<Fracture></Fracture>

		<fTime>23:30</fTime>
		<fYear>2011</fYear>
		<Gas></Gas>
		<GeneralDescription></GeneralDescription>
		<HeatingCooling></HeatingCooling>
		<Images></Images>
		<InstrumentTimeHours>23</InstrumentTimeHours>

		<InstrumentTimeMinutes>30</InstrumentTimeMinutes>
		<LineScans></LineScans>
		<LoadLock></LoadLock>
		<LoadLockCooling></LoadLockCooling>
		<LoadLockCoolingT></LoadLockCoolingT>
		<LoadLockHeating></LoadLockHeating>
		<LoadLockHeatingT></LoadLockHeatingT>
		<Maps></Maps>

		<noSamples>2</noSamples>
		<operator></operator>
		<Other></Other>
		<OtherSampleTreatment></OtherSampleTreatment>
		<OtherSampleTreatmentText></OtherSampleTreatmentText>
		<OtherSelect></OtherSelect>
		<RecessedBar></RecessedBar>
		<RecessedStub></RecessedStub>

		<SAC></SAC>
		<SACCooling></SACCooling>
		<SACCoolingT></SACCoolingT>
		<SACHeating></SACHeating>
		<SACHeatingT></SACHeatingT>
		<Screws></Screws>
		<sDay>20</sDay>
		<sMonth>5</sMonth>

		<Spectra></Spectra>
		<sPressureY></sPressureY>
		<sPressureYY></sPressureYY>
		<sTime>00:00</sTime>
		<sYear>2011</sYear>
		<Tape></Tape>
		<depthprofilingtable>
			<profile>

				<value>1</value>
				<value>2</value>
				<value>3</value>
			</profile>
			<profile>
				<value>11</value>
				<value>22</value>

				<value>33</value>
			</profile>
		</depthprofilingtable>
		<sampletable>
			<sample>
				<id>sam1</id>
				<details>sample 1</details>

				<type>undivided solid</type>
			</sample>
			<sample>
				<id>sam2</id>
				<details>sample 2</details>
				<type>liquid/film</type>
			</sample>

		</sampletable>
		<xraytable>
			<set>
				<source>Al</source>
				<ImA>123</ImA>
				<VkV>456</VkV>
			</set>

			<set>
				<source>Mg</source>
				<ImA>112233</ImA>
				<VkV>445566</VkV>
			</set>
		</xraytable>
	</logSheet>

	<proposalRequest>
		<UsersUID>md</UsersUID>
		<RequestNumber>2011-04-11_10:54:40-XPS-md</RequestNumber>
		<date>2011-04-11</date>
		<technique>XPS</technique>
		<description></description>
		<numberofsamples>2</numberofsamples>

		<samples>
			<sample>
				<id>sam1</id>
				<details>sample 1</details>
				<type></type>			
			</sample>
			<sample>
				<id>sam2</id>

				<details>sample 2</details>
				<type></type>			
			</sample>
		</samples>
		<ultrahighvacuum></ultrahighvacuum>
		<magnetic></magnetic>
		<afteranalysis></afteranalysis>
		<hazardous></hazardous>
		<dangerous></dangerous>

		<analysis></analysis>
		<analysisby>user</analysisby>
		<accesspresent>no</accesspresent>
		<accesstype>local</accesstype>
		<users></users>
		<sapA></sapA>
		<sapB></sapB>

		<status>cancelled</status>
		<billing></billing>
		<jobcat></jobcat>
		<ASA></ASA>
		<Instrument>XPS-Ultra</Instrument>
		<teachingCourseCode></teachingCourseCode>
		<UsersName>Mr Michael DSilva</UsersName>

		<UsersInstitution>VeRSI</UsersInstitution>
		<UsersDepartment>Collaborative Cyberinfrastructure for Instrumentation</UsersDepartment>
		<UsersAddress>Street. Rob's office City. Latrobe uni State. VIC Postcode. 3083</UsersAddress>
		<UsersTelephone>(+614) 03-19-18-55</UsersTelephone>
		<UsersFax></UsersFax>
		<UsersEmail>michael.dsilva@versi.edu.au</UsersEmail>

	</proposalRequest>
	<MountPoint>/SAN/ltri/XPS-Ultra/archive/XPS-Ultra-10005</MountPoint>
</values>

<dataset>
	<institution>La Trobe University</institution>
	<department>Department of Physics</department>
	<key> </key>
	<alternativeName></alternativeName>
	<abbreviatedName></abbreviatedName>
	<primaryName>Sample Dataset Name</primaryName>
	<url></url>
	<email></email>
	<fax></fax>
	<phone></phone>
	<otherElectronic type=""></otherElectronic>
	<startDate>1993-01-04T21:05:00+1100</startDate>
	<endDate></endDate>
	<subject type="anzsrc-for">020406</subject>
	<subject type="anzsrc-for">030603</subject>
	<subject type="anzsrc-for">030301</subject>
	<briefDescription>Test 1</briefDescription>
	<fullDescription></fullDescription>
	<relatedWebsite>
		<location></location>
		<title></title>
		<notes></notes>
	</relatedWebsite>
	<relatedPublication>
		<location></location>
		<title></title>
		<notes></notes>
	</relatedPublication>
</dataset>
-->
	<xsl:template match="values">
		<dataset xmlns="http://hdl.handle.net/102.100.100/6976">
			<hasCollector identifier="person:{proposalRequest/UsersUID}"><xsl:value-of select="proposalRequest/UsersName"/></hasCollector>
			<abbreviatedName></abbreviatedName>
			<primaryName><xsl:value-of select="proposalRequest/technique"/>
				<xsl:text>: </xsl:text>
				<xsl:for-each select="logSheet/sampletable/sample/details">
					<xsl:value-of select="."/>
					<xsl:if test="position() = last() - 1"><!-- there is exactly one more sample -->
						<xsl:text> and </xsl:text>
					</xsl:if>
					<xsl:if test="position() &lt; last() - 1"><!-- there are more than one more sample -->
						<xsl:text>, </xsl:text>
					</xsl:if>
				</xsl:for-each></primaryName>
			<url></url>
			<otherElectronic type=""></otherElectronic>
			<startDate><xsl:value-of select="concat(logSheet/sYear, '-', format-number(logSheet/sMonth, '00'), '-', format-number(logSheet/sDay, '00'), 'T', logSheet/sTime, ':00+10:00')" /></startDate>
			<endDate><xsl:value-of select="concat(logSheet/fYear, '-', format-number(logSheet/fMonth, '00'), '-', format-number(logSheet/fDay, '00'), 'T', logSheet/fTime, ':00+10:00')" /></endDate>  
			<subject type="anzsrc-for">020406</subject>
			<subject type="anzsrc-for">030603</subject>
			<subject type="anzsrc-for">030301</subject>
			<briefDescription><xsl:value-of select="logSheet/GeneralDescription"/></briefDescription>
			<fullDescription><xsl:text>Samples: </xsl:text>
				<xsl:for-each select="logSheet/sampletable/sample">
					<xsl:value-of select="details"/>
					<xsl:text> (</xsl:text>
					<xsl:value-of select="type"/>
					<xsl:text>)</xsl:text>
					<xsl:if test="position() &lt; last()">, </xsl:if>
				</xsl:for-each></fullDescription>
			<relatedWebsite>
				<location></location>
				<title></title>
				<notes></notes>
			</relatedWebsite>
			<relatedPublication>
				<location></location>
				<title></title>
				<notes></notes>
			</relatedPublication>
		</dataset>
	</xsl:template>
	

</xsl:stylesheet>
